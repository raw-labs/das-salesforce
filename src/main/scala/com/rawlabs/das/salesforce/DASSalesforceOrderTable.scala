/*
 * Copyright 2024 RAW Labs S.A.
 *
 * Use of this software is governed by the Business Source License
 * included in the file licenses/BSL.txt.
 *
 * As of the Change Date specified in that file, in accordance with
 * the Business Source License, use of this software will be governed
 * by the Apache License, Version 2.0, included in the file
 * licenses/APL.txt.
 */

package com.rawlabs.das.salesforce

import com.rawlabs.protocol.das.{ColumnDefinition, TableDefinition, TableId}
import com.rawlabs.protocol.raw.{BoolType, DoubleType, RecordType, StringType, TimestampType, Type}

class DASSalesforceOrderTable(connector: DASSalesforceConnector)
    extends DASSalesforceTable(connector, "salesforce_order", "Order") {

  override def tableDefinition: TableDefinition = {
    val tbl = TableDefinition
      .newBuilder()
      .setTableId(TableId.newBuilder().setName(tableName))
      .setDescription(
        "Represents an order associated with a contract or an account."
      )
    val columns = Seq(
      ColumnDefinition
        .newBuilder()
        .setName("id")
        .setDescription("Unique identifier of the order in Salesforce.")
        .setType(Type.newBuilder().setString(StringType.newBuilder().setTriable(false).setNullable(true)).build())
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("name")
        .setDescription("Title for the order that distinguishes it from other orders.")
        .setType(Type.newBuilder().setString(StringType.newBuilder().setTriable(false).setNullable(true)).build())
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("account_id")
        .setDescription("ID of the Account associated with this order.")
        .setType(Type.newBuilder().setString(StringType.newBuilder().setTriable(false).setNullable(true)).build())
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("order_number")
        .setDescription("Order number assigned to this order.")
        .setType(Type.newBuilder().setString(StringType.newBuilder().setTriable(false).setNullable(true)).build())
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("owner_id")
        .setDescription(" ID of the User or queue that owns this order.")
        .setType(Type.newBuilder().setString(StringType.newBuilder().setTriable(false).setNullable(true)).build())
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("status")
        .setDescription(
          "The Status field specifies the current state of an order. Status strings represent its current state (Draft or Activated)."
        )
        .setType(Type.newBuilder().setString(StringType.newBuilder().setTriable(false).setNullable(true)).build())
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("total_amount")
        .setDescription("Total amount of the order.")
        .setType(Type.newBuilder().setDouble(DoubleType.newBuilder().setTriable(false).setNullable(true)).build())
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("type")
        .setDescription("Type of order.")
        .setType(Type.newBuilder().setString(StringType.newBuilder().setTriable(false).setNullable(true)).build())
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("activated_by_id")
        .setDescription("ID of the User who activated this order.")
        .setType(Type.newBuilder().setString(StringType.newBuilder().setTriable(false).setNullable(true)).build())
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("activated_date")
        .setDescription("Date and time when the order was activated.")
        .setType(
          Type.newBuilder().setTimestamp(TimestampType.newBuilder().setTriable(false).setNullable(true)).build()
        )
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("bill_to_contact_id")
        .setDescription("ID of the contact that the order is billed to.")
        .setType(Type.newBuilder().setString(StringType.newBuilder().setTriable(false).setNullable(true)).build())
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("billing_address")
        .setDescription("The billing adress for the order.")
        .setType(Type.newBuilder().setRecord(RecordType.newBuilder()).build())
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("company_authorized_by_id")
        .setDescription("ID of the user who authorized the account associated with the order.")
        .setType(Type.newBuilder().setString(StringType.newBuilder().setTriable(false).setNullable(true)).build())
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("company_authorized_date")
        .setDescription("The date on which your organization authorized the order.")
        .setType(
          Type.newBuilder().setTimestamp(TimestampType.newBuilder().setTriable(false).setNullable(true)).build()
        )
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("contract_id")
        .setDescription(
          "ID of the contract associated with this order. Can only be updated when the order's StatusCode value is Draft."
        )
        .setType(Type.newBuilder().setString(StringType.newBuilder().setTriable(false).setNullable(true)).build())
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("created_by_id")
        .setDescription("Id of the user who created the order record.")
        .setType(Type.newBuilder().setString(StringType.newBuilder().setTriable(false).setNullable(true)).build())
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("created_date")
        .setDescription("Creation date and time of the order record.")
        .setType(
          Type.newBuilder().setTimestamp(TimestampType.newBuilder().setTriable(false).setNullable(true)).build()
        )
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("customer_authorized_by_id")
        .setDescription("ID of the contact who authorized the order.")
        .setType(Type.newBuilder().setString(StringType.newBuilder().setTriable(false).setNullable(true)).build())
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("customer_authorized_date")
        .setDescription("Date on which the contact authorized the order.")
        .setType(
          Type.newBuilder().setTimestamp(TimestampType.newBuilder().setTriable(false).setNullable(true)).build()
        )
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("description")
        .setDescription("Description of the order.")
        .setType(Type.newBuilder().setString(StringType.newBuilder().setTriable(false).setNullable(true)).build())
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("effective_date")
        .setDescription("Date at which the order becomes effective.")
        .setType(
          Type.newBuilder().setTimestamp(TimestampType.newBuilder().setTriable(false).setNullable(true)).build()
        )
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("end_date")
        .setDescription("Date at which the order ends.")
        .setType(
          Type.newBuilder().setTimestamp(TimestampType.newBuilder().setTriable(false).setNullable(true)).build()
        )
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("is_deleted")
        .setDescription("Indicates that the order is deleted.")
        .setType(Type.newBuilder().setBool(BoolType.newBuilder().setTriable(false).setNullable(true)).build())
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("is_reduction_order")
        .setDescription("Determines whether an order is a reduction order.")
        .setType(Type.newBuilder().setBool(BoolType.newBuilder().setTriable(false).setNullable(true)).build())
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("last_modified_by_id")
        .setDescription("Id of the user who most recently changed the order record.")
        .setType(Type.newBuilder().setString(StringType.newBuilder().setTriable(false).setNullable(true)).build())
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("last_modified_date")
        .setDescription("Date of most recent change in the order record.")
        .setType(
          Type.newBuilder().setTimestamp(TimestampType.newBuilder().setTriable(false).setNullable(true)).build()
        )
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("last_referenced_date")
        .setDescription(
          "The timestamp when the current user last accessed this record, a record related to this record, or a list view."
        )
        .setType(
          Type.newBuilder().setTimestamp(TimestampType.newBuilder().setTriable(false).setNullable(true)).build()
        )
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("last_viewed_date")
        .setDescription(
          "The timestamp when the current user last viewed this record or list view. If this value is null, the user might have only accessed this record or list view (LastReferencedDate) but not viewed it."
        )
        .setType(
          Type.newBuilder().setTimestamp(TimestampType.newBuilder().setTriable(false).setNullable(true)).build()
        )
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("order_reference_number")
        .setDescription("Reference number assigned to the order.")
        .setType(Type.newBuilder().setString(StringType.newBuilder().setTriable(false).setNullable(true)).build())
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("original_order_id")
        .setDescription(
          "Optional. ID of the original order that a reduction order is reducing, if the reduction order is reducing a single order."
        )
        .setType(Type.newBuilder().setString(StringType.newBuilder().setTriable(false).setNullable(true)).build())
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("po_date")
        .setDescription("Date of the purchase order.")
        .setType(
          Type.newBuilder().setTimestamp(TimestampType.newBuilder().setTriable(false).setNullable(true)).build()
        )
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("po_number")
        .setDescription("Number identifying the purchase order.")
        .setType(Type.newBuilder().setString(StringType.newBuilder().setTriable(false).setNullable(true)).build())
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("pricebook_2_id")
        .setDescription("ID of the price book associated with this order.")
        .setType(Type.newBuilder().setString(StringType.newBuilder().setTriable(false).setNullable(true)).build())
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("ship_to_contact_id")
        .setDescription("ID of the contact that the order is shipped to.")
        .setType(Type.newBuilder().setString(StringType.newBuilder().setTriable(false).setNullable(true)).build())
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("status_code")
        .setDescription("Status code of the stage that the order has reached in the order business process.")
        .setType(Type.newBuilder().setString(StringType.newBuilder().setTriable(false).setNullable(true)).build())
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("system_modstamp")
        .setDescription("The date and time when order record was last modified by a user or by an automated process.")
        .setType(
          Type.newBuilder().setTimestamp(TimestampType.newBuilder().setTriable(false).setNullable(true)).build()
        )
        .build(),
      ColumnDefinition
        .newBuilder()
        .setName("shipping_address")
        .setDescription("The shipping adress for the order.")
        .setType(Type.newBuilder().setRecord(RecordType.newBuilder()).build())
        .build()
    )
    fixHiddenAndDynamicColumns(columns).foreach(tbl.addColumns)
    tbl.setStartupCost(1000)
    tbl.build()
  }

}
